{"version":3,"file":"AdminSurfaceBinder.js","sourceRoot":"","sources":["../../src/delegates/AdminSurfaceBinder.ts"],"names":[],"mappings":";;;AAEA,MAAa,kBAAkB;IAA/B;QACU,gBAAW,GAAG,KAAK,CAAC;QACpB,kBAAa,GAAG,KAAK,CAAC;QACtB,iBAAY,GAAG,KAAK,CAAC;IA2C/B,CAAC;IAzCQ,aAAa,CAClB,GAAY,EACZ,SAAqE;QAErE,IAAI,IAAI,CAAC,WAAW;YAAE,OAAO;QAC7B,GAAG,CAAC,GAAG,CACL,CAAC,QAAQ,EAAE,YAAY,CAAC,EACxB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,SAAS,CAAC,iBAAiB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAChE,CAAC;QACF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;IAC1B,CAAC;IAEM,eAAe,CACpB,GAAY,EACZ,SAAqE,EACrE,gBAAgC;QAEhC,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;QACnC,IAAI,IAAI,CAAC,aAAa;YAAE,OAAO;QAC/B,GAAG,CAAC,GAAG,CACL,QAAQ,EACR,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,SAAS,CAAC,iBAAiB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,EAC/D,gBAAgB,CACjB,CAAC;QACF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;IAC5B,CAAC;IAEM,cAAc,CACnB,GAAY,EACZ,SAAqE,EACrE,UAAwC;QAExC,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;QACnC,IAAI,IAAI,CAAC,YAAY;YAAE,OAAO;QAC9B,GAAG,CAAC,GAAG,CACL,QAAQ,EACR,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,CAAC,SAAS,CAAC,iBAAiB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,EAC/D,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CACnC,CAAC;QACF,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;IAC3B,CAAC;CACF;AA9CD,gDA8CC","sourcesContent":["import type { Express, RequestHandler } from 'express';\n\nexport class AdminSurfaceBinder {\n  private mountedAuth = false;\n  private mountedStatic = false;\n  private mountedIndex = false;\n\n  public bindAdminAuth(\n    app: Express,\n    adminAuth: { authenticateAdmin(req: any, res: any, next: any): void },\n  ): void {\n    if (this.mountedAuth) return;\n    app.use(\n      ['/admin', '/api/admin'],\n      (req, res, next) => adminAuth.authenticateAdmin(req, res, next),\n    );\n    this.mountedAuth = true;\n  }\n\n  public bindAdminStatic(\n    app: Express,\n    adminAuth: { authenticateAdmin(req: any, res: any, next: any): void },\n    staticMiddleware: RequestHandler,\n  ): void {\n    this.bindAdminAuth(app, adminAuth);\n    if (this.mountedStatic) return;\n    app.use(\n      '/admin',\n      (req, res, next) => adminAuth.authenticateAdmin(req, res, next),\n      staticMiddleware,\n    );\n    this.mountedStatic = true;\n  }\n\n  public bindAdminIndex(\n    app: Express,\n    adminAuth: { authenticateAdmin(req: any, res: any, next: any): void },\n    serveIndex: (req: any, res: any) => void,\n  ): void {\n    this.bindAdminAuth(app, adminAuth);\n    if (this.mountedIndex) return;\n    app.get(\n      '/admin',\n      (req, res, next) => adminAuth.authenticateAdmin(req, res, next),\n      (req, res) => serveIndex(req, res),\n    );\n    this.mountedIndex = true;\n  }\n}\n"]}