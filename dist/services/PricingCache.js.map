{"version":3,"file":"PricingCache.js","sourceRoot":"","sources":["../../src/services/PricingCache.ts"],"names":[],"mappings":";;;AAAA,MAAa,YAAY;IAKvB,YAAY,KAAa;QAJjB,aAAQ,GAAkB,IAAI,CAAC;QAC/B,gBAAW,GAAG,CAAC,CAAC;QAItB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,CAAC;IAED,SAAS;QACP,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;IACvB,CAAC;IAED,GAAG;QACD,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED,GAAG,CAAC,KAAa,EAAE,KAAc;QAC/B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,WAAW,GAAG,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;IAC9D,CAAC;IAED,SAAS,CAAC,KAAc;QACtB,MAAM,GAAG,GAAG,KAAK,KAAK,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;QACrD,IAAI,IAAI,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO,IAAI,CAAC;QACjC,IAAI,IAAI,CAAC,WAAW,KAAK,CAAC;YAAE,OAAO,IAAI,CAAC;QACxC,OAAO,GAAG,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC;IAC9C,CAAC;CACF;AA7BD,oCA6BC","sourcesContent":["export class PricingCache {\n  private snapshot: number | null = null;\n  private timestampMs = 0;\n  private ttlMs: number;\n\n  constructor(ttlMs: number) {\n    this.ttlMs = ttlMs;\n  }\n\n  initCache(): void {\n    this.snapshot = null;\n    this.timestampMs = 0;\n  }\n\n  get(): number | null {\n    return this.snapshot;\n  }\n\n  set(value: number, nowMs?: number): void {\n    this.snapshot = value;\n    this.timestampMs = nowMs !== undefined ? nowMs : Date.now();\n  }\n\n  isExpired(nowMs?: number): boolean {\n    const now = nowMs !== undefined ? nowMs : Date.now();\n    if (this.ttlMs <= 0) return true;\n    if (this.timestampMs === 0) return true;\n    return now - this.timestampMs >= this.ttlMs;\n  }\n}\n"]}