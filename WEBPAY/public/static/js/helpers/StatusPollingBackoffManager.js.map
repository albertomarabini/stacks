{
  "version": 3,
  "sources": ["../../../../src/client/islands/helpers/StatusPollingBackoffManager.ts"],
  "sourcesContent": ["export class StatusPollingBackoffManager {\n  pollingDelay: number = 1200;\n  minDelay: number = 1000;\n  maxDelay: number = 60000;\n  backoffFactor: number = 1.7;\n  intervalId: number | null = null;\n  suspended: boolean = false;\n\n  startPolling(callback: () => void): void {\n    this.clearPolling();\n    this.intervalId = window.setInterval(callback, this.pollingDelay);\n  }\n\n  clearPolling(): void {\n    if (this.intervalId !== null) {\n      clearInterval(this.intervalId);\n      this.intervalId = null;\n    }\n  }\n\n  backoffAndRetry(callback: () => void): void {\n    if (this.suspended) return;\n    this.clearPolling();\n    this.pollingDelay = Math.min(\n      this.maxDelay,\n      Math.max(this.minDelay, Math.floor(this.pollingDelay * this.backoffFactor))\n    );\n    window.setTimeout(callback, this.pollingDelay);\n  }\n\n  suspend(): void {\n    this.suspended = true;\n    this.clearPolling();\n  }\n\n  resume(callback: () => void, isTerminal: boolean): void {\n    this.suspended = false;\n    if (!isTerminal && this.intervalId === null) {\n      this.startPolling(callback);\n    }\n  }\n\n  resetDelay(): void {\n    this.pollingDelay = 1200;\n  }\n\n  getPollingDelay(): number {\n    return this.pollingDelay;\n  }\n}\n"],
  "mappings": ";AAAO,IAAM,8BAAN,MAAkC;AAAA,EAAlC;AACL,wBAAuB;AACvB,oBAAmB;AACnB,oBAAmB;AACnB,yBAAwB;AACxB,sBAA4B;AAC5B,qBAAqB;AAAA;AAAA,EAErB,aAAa,UAA4B;AACvC,SAAK,aAAa;AAClB,SAAK,aAAa,OAAO,YAAY,UAAU,KAAK,YAAY;AAAA,EAClE;AAAA,EAEA,eAAqB;AACnB,QAAI,KAAK,eAAe,MAAM;AAC5B,oBAAc,KAAK,UAAU;AAC7B,WAAK,aAAa;AAAA,IACpB;AAAA,EACF;AAAA,EAEA,gBAAgB,UAA4B;AAC1C,QAAI,KAAK,UAAW;AACpB,SAAK,aAAa;AAClB,SAAK,eAAe,KAAK;AAAA,MACvB,KAAK;AAAA,MACL,KAAK,IAAI,KAAK,UAAU,KAAK,MAAM,KAAK,eAAe,KAAK,aAAa,CAAC;AAAA,IAC5E;AACA,WAAO,WAAW,UAAU,KAAK,YAAY;AAAA,EAC/C;AAAA,EAEA,UAAgB;AACd,SAAK,YAAY;AACjB,SAAK,aAAa;AAAA,EACpB;AAAA,EAEA,OAAO,UAAsB,YAA2B;AACtD,SAAK,YAAY;AACjB,QAAI,CAAC,cAAc,KAAK,eAAe,MAAM;AAC3C,WAAK,aAAa,QAAQ;AAAA,IAC5B;AAAA,EACF;AAAA,EAEA,aAAmB;AACjB,SAAK,eAAe;AAAA,EACtB;AAAA,EAEA,kBAA0B;AACxB,WAAO,KAAK;AAAA,EACd;AACF;",
  "names": []
}
