{
  "version": 3,
  "sources": ["../../../src/client/islands/helpers/StatusStripDomRenderer.ts"],
  "sourcesContent": ["//StatusStripDomRenderer.ts\n\nexport class StatusStripDomRenderer {\n  private statusStripEl: HTMLElement | null = null;\n  private errorBannerEl: HTMLElement | null = null;\n  private currentStatus: string | null = null;\n\n  updateStatus(status: string): void {\n    const el = this.getStatusStripEl();\n    el.textContent = this.statusToDisplay(status);\n    el.className =\n      \"status-strip px-2 py-1 rounded border text-sm font-medium transition-colors duration-200 \" +\n      this.statusToClasses(status);\n    this.currentStatus = status;\n    if (this.isTerminalStatus(status)) {\n      el.setAttribute('data-terminal', 'true');\n    }\n  }\n\n  showError(message: string): void {\n    const errorEl = this.getErrorBannerEl(true);\n    errorEl.textContent = message;\n    errorEl.style.display = \"block\";\n  }\n\n  hideError(): void {\n    const errorEl = this.getErrorBannerEl(false);\n    if (errorEl) {\n      errorEl.style.display = \"none\";\n    }\n  }\n\n  validateAndInitHydration(h: { invoiceId: string } | undefined): boolean {\n    if (!h || typeof h.invoiceId !== \"string\" || !h.invoiceId) {\n      // previously wrote an error to the DOM \u2014 remove that side effect\n      return false; // be silent\n    }\n    this.currentStatus = null;\n    this.hideError();\n    return true;\n  }\n\n\n  getCurrentStatus(): string | null {\n    return this.currentStatus;\n  }\n\n  private getStatusStripEl(): HTMLElement {\n    if (this.statusStripEl) return this.statusStripEl;\n    this.statusStripEl = document.getElementById(\"status-strip\") as HTMLElement;\n    return this.statusStripEl;\n  }\n\n  private getErrorBannerEl(createIfMissing: boolean): HTMLElement {\n    if (this.errorBannerEl) return this.errorBannerEl;\n    let el = document.getElementById(\"status-strip-error\") as HTMLElement | null;\n    if (!el && createIfMissing) {\n      const parent = this.getStatusStripEl();\n      el = document.createElement(\"div\");\n      el.id = \"status-strip-error\";\n      el.className =\n        \"status-strip-error px-2 py-1 rounded border bg-red-50 text-red-800 border-red-200 mt-2 text-sm font-medium\";\n      el.style.display = \"none\";\n      if (parent && parent.parentNode) {\n        parent.parentNode.insertBefore(el, parent.nextSibling);\n      } else {\n        document.body.appendChild(el);\n      }\n    }\n    this.errorBannerEl = el as HTMLElement;\n    return this.errorBannerEl;\n  }\n\n  private statusToDisplay(status: string): string {\n    switch (status) {\n      case \"unpaid\":\n        return \"Awaiting payment\";\n      case \"paid\":\n        return \"Paid \u2713\";\n      case \"partially_refunded\":\n        return \"Partially Refunded\";\n      case \"refunded\":\n        return \"Refunded\";\n      case \"canceled\":\n        return \"Canceled\";\n      case \"expired\":\n        return \"Expired\";\n      default:\n        return \"Unknown\";\n    }\n  }\n\n  private statusToClasses(status: string): string {\n    switch (status) {\n      case \"unpaid\":\n        return \"bg-yellow-50 text-yellow-800 border-yellow-200\";\n      case \"paid\":\n        return \"bg-green-50 text-green-800 border-green-200\";\n      case \"partially_refunded\":\n      case \"refunded\":\n        return \"bg-blue-50 text-blue-800 border-blue-200\";\n      case \"canceled\":\n      case \"expired\":\n        return \"bg-gray-50 text-gray-800 border-gray-200\";\n      default:\n        return \"bg-red-50 text-red-800 border-red-200\";\n    }\n  }\n\n  private isTerminalStatus(status: string): boolean {\n    return status === \"paid\" || status === \"expired\" || status === \"canceled\";\n  }\n}\n"],
  "mappings": ";AAEO,IAAM,yBAAN,MAA6B;AAAA,EAA7B;AACL,SAAQ,gBAAoC;AAC5C,SAAQ,gBAAoC;AAC5C,SAAQ,gBAA+B;AAAA;AAAA,EAEvC,aAAa,QAAsB;AACjC,UAAM,KAAK,KAAK,iBAAiB;AACjC,OAAG,cAAc,KAAK,gBAAgB,MAAM;AAC5C,OAAG,YACD,8FACA,KAAK,gBAAgB,MAAM;AAC7B,SAAK,gBAAgB;AACrB,QAAI,KAAK,iBAAiB,MAAM,GAAG;AACjC,SAAG,aAAa,iBAAiB,MAAM;AAAA,IACzC;AAAA,EACF;AAAA,EAEA,UAAU,SAAuB;AAC/B,UAAM,UAAU,KAAK,iBAAiB,IAAI;AAC1C,YAAQ,cAAc;AACtB,YAAQ,MAAM,UAAU;AAAA,EAC1B;AAAA,EAEA,YAAkB;AAChB,UAAM,UAAU,KAAK,iBAAiB,KAAK;AAC3C,QAAI,SAAS;AACX,cAAQ,MAAM,UAAU;AAAA,IAC1B;AAAA,EACF;AAAA,EAEA,yBAAyB,GAA+C;AACtE,QAAI,CAAC,KAAK,OAAO,EAAE,cAAc,YAAY,CAAC,EAAE,WAAW;AAEzD,aAAO;AAAA,IACT;AACA,SAAK,gBAAgB;AACrB,SAAK,UAAU;AACf,WAAO;AAAA,EACT;AAAA,EAGA,mBAAkC;AAChC,WAAO,KAAK;AAAA,EACd;AAAA,EAEQ,mBAAgC;AACtC,QAAI,KAAK,cAAe,QAAO,KAAK;AACpC,SAAK,gBAAgB,SAAS,eAAe,cAAc;AAC3D,WAAO,KAAK;AAAA,EACd;AAAA,EAEQ,iBAAiB,iBAAuC;AAC9D,QAAI,KAAK,cAAe,QAAO,KAAK;AACpC,QAAI,KAAK,SAAS,eAAe,oBAAoB;AACrD,QAAI,CAAC,MAAM,iBAAiB;AAC1B,YAAM,SAAS,KAAK,iBAAiB;AACrC,WAAK,SAAS,cAAc,KAAK;AACjC,SAAG,KAAK;AACR,SAAG,YACD;AACF,SAAG,MAAM,UAAU;AACnB,UAAI,UAAU,OAAO,YAAY;AAC/B,eAAO,WAAW,aAAa,IAAI,OAAO,WAAW;AAAA,MACvD,OAAO;AACL,iBAAS,KAAK,YAAY,EAAE;AAAA,MAC9B;AAAA,IACF;AACA,SAAK,gBAAgB;AACrB,WAAO,KAAK;AAAA,EACd;AAAA,EAEQ,gBAAgB,QAAwB;AAC9C,YAAQ,QAAQ;AAAA,MACd,KAAK;AACH,eAAO;AAAA,MACT,KAAK;AACH,eAAO;AAAA,MACT,KAAK;AACH,eAAO;AAAA,MACT,KAAK;AACH,eAAO;AAAA,MACT,KAAK;AACH,eAAO;AAAA,MACT,KAAK;AACH,eAAO;AAAA,MACT;AACE,eAAO;AAAA,IACX;AAAA,EACF;AAAA,EAEQ,gBAAgB,QAAwB;AAC9C,YAAQ,QAAQ;AAAA,MACd,KAAK;AACH,eAAO;AAAA,MACT,KAAK;AACH,eAAO;AAAA,MACT,KAAK;AAAA,MACL,KAAK;AACH,eAAO;AAAA,MACT,KAAK;AAAA,MACL,KAAK;AACH,eAAO;AAAA,MACT;AACE,eAAO;AAAA,IACX;AAAA,EACF;AAAA,EAEQ,iBAAiB,QAAyB;AAChD,WAAO,WAAW,UAAU,WAAW,aAAa,WAAW;AAAA,EACjE;AACF;",
  "names": []
}
