{
  "version": 3,
  "sources": ["../../../src/client/islands/AdminKeysIsland.ts"],
  "sourcesContent": ["/**\n * AdminKeysIsland\n * Client-side handler for one-time copy/reveal of admin API keys/HMAC secrets in the SSR admin keys view.\n * Binds to the Copy button and clipboard API. Never exposes secrets after the initial reveal.\n */\n\nexport function handleCopySecretClick(event: MouseEvent): void {\n  const btn = event.currentTarget as HTMLButtonElement;\n  // The secret field is SSR-injected and present only on the initial reveal.\n  // Convention: id=\"api-secret\" or id=\"hmac-secret\" or .secret-value near the button\n\n  let secretEl: HTMLElement | null =\n    document.getElementById('api-secret') ||\n    document.getElementById('hmac-secret');\n\n  if (!secretEl && btn.parentElement) {\n    secretEl = btn.parentElement.querySelector('.secret-value');\n  }\n\n  if (!secretEl) {\n    btn.disabled = true;\n    btn.style.display = 'none';\n    return;\n  }\n\n  let secretValue: string;\n  if ('value' in secretEl && typeof (secretEl as HTMLInputElement).value === 'string') {\n    secretValue = (secretEl as HTMLInputElement).value;\n  } else {\n    secretValue = secretEl.textContent || '';\n  }\n\n  if (\n    !secretValue ||\n    !secretValue.trim() ||\n    /^\\*+$/.test(secretValue.trim())\n  ) {\n    btn.disabled = true;\n    btn.style.display = 'none';\n    return;\n  }\n\n  navigator.clipboard.writeText(secretValue).then(\n    () => {\n      btn.textContent = 'Copied!';\n      setTimeout(() => {\n        btn.textContent = 'Copy';\n      }, 1200);\n    },\n    () => {\n      btn.textContent = 'Copy failed';\n      setTimeout(() => {\n        btn.textContent = 'Copy';\n      }, 1200);\n    }\n  );\n}\n"],
  "mappings": ";AAMO,SAAS,sBAAsB,OAAyB;AAC7D,QAAM,MAAM,MAAM;AAIlB,MAAI,WACF,SAAS,eAAe,YAAY,KACpC,SAAS,eAAe,aAAa;AAEvC,MAAI,CAAC,YAAY,IAAI,eAAe;AAClC,eAAW,IAAI,cAAc,cAAc,eAAe;AAAA,EAC5D;AAEA,MAAI,CAAC,UAAU;AACb,QAAI,WAAW;AACf,QAAI,MAAM,UAAU;AACpB;AAAA,EACF;AAEA,MAAI;AACJ,MAAI,WAAW,YAAY,OAAQ,SAA8B,UAAU,UAAU;AACnF,kBAAe,SAA8B;AAAA,EAC/C,OAAO;AACL,kBAAc,SAAS,eAAe;AAAA,EACxC;AAEA,MACE,CAAC,eACD,CAAC,YAAY,KAAK,KAClB,QAAQ,KAAK,YAAY,KAAK,CAAC,GAC/B;AACA,QAAI,WAAW;AACf,QAAI,MAAM,UAAU;AACpB;AAAA,EACF;AAEA,YAAU,UAAU,UAAU,WAAW,EAAE;AAAA,IACzC,MAAM;AACJ,UAAI,cAAc;AAClB,iBAAW,MAAM;AACf,YAAI,cAAc;AAAA,MACpB,GAAG,IAAI;AAAA,IACT;AAAA,IACA,MAAM;AACJ,UAAI,cAAc;AAClB,iBAAW,MAAM;AACf,YAAI,cAAc;AAAA,MACpB,GAAG,IAAI;AAAA,IACT;AAAA,EACF;AACF;",
  "names": []
}
